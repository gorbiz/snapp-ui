html
  head
    meta(name="viewport" content="width=device-width, initial-scale=1")
    style.
      body {
        margin: 0;
      }
      #display {
        background-color: rgb(64, 64, 92);
        background-repeat: no-repeat;
        background-size: contain;
        width: 100%;
        min-height: 100vh;
      }
      #fullscreen-button {
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: monospace;
        opacity: 0.25;
        background: rgb(255, 255, 255);
        position: fixed;
        top: 0;
        right: 0;
        width: 25vw;
        height: 12vh;
      }
      #nav-left, #nav-right {
        position: fixed;
        top: 0;
        opacity: 0.5;
        min-height: 100vh;
        width: 50vw;
      }
      #nav-left {
        left: 0;
      }
      #nav-right {
        right: 0;
      }
    title= title
  body
    #display
    #nav-left(onclick="nav(-1)")
    #nav-right(onclick="nav(1)")
    #fullscreen-button(onclick="toggleFullscreen()")
      | fullscreen

    script.

      var files = !{JSON.stringify(files)}
      var baseUrl = '#{baseUrl}'
      var index = files.length - 1

      function updateImg () {
        var img = files[index]
        var elem = document.getElementById('display')
        elem.style.backgroundImage = `url(${baseUrl}${img})`
      }

      function toggleFullscreen () {
        if (!document.fullscreen) {
          var elem = document.getElementsByTagName('body')[0]
          elem.requestFullscreen()
        } else {
          document.exitFullscreen()
        }
      }

      function nav (dir) {
        if (files[index + dir]) {
          index += dir
          updateImg()
        }
      }

      updateImg()

      // preload images
      var images = []
      for (var i = files.length - 1; i >= 0; i--) {
        images[i] = new Image()
        images[i].src = `${baseUrl}${files[i]}`
      }

      document.onkeydown = function (evt) {
        evt = evt || window.event
        if (evt.keyCode === 37) return nav(-1)
        if (evt.keyCode === 39) return nav(1)
      }
